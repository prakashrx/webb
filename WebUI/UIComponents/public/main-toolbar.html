<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>WebUI Trading Platform</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #2d3748;
            height: 48px;
            overflow: hidden;
        }
    </style>
</head>
<body>
    <webui-main-toolbar 
        title="WebUI Trading Platform" 
        version="1.0.0">
    </webui-main-toolbar>
    
    <script type="module" src="./MainToolbar.js"></script>
    
    <script>
        // Debug logging
        console.log('Main Toolbar HTML loaded');
        
        // Check if component is registered
        setTimeout(() => {
            console.log('Checking for webui-main-toolbar element...');
            const toolbar = document.querySelector('webui-main-toolbar');
            console.log('Toolbar element:', toolbar);
            
            if (toolbar) {
                console.log('Toolbar innerHTML:', toolbar.innerHTML);
                console.log('Toolbar shadowRoot:', toolbar.shadowRoot);
            }
        }, 1000);
        
        // Listen for component events and forward to C#
        document.addEventListener('webui-menu', function(event) {
            console.log('webui-menu event received:', event.detail);
            if (window.chrome && window.chrome.webview) {
                window.chrome.webview.postMessage({
                    type: 'webui-menu',
                    action: event.detail.action,
                    timestamp: event.detail.timestamp
                });
            }
        });
        
        document.addEventListener('webui-close', function(event) {
            console.log('webui-close event received:', event.detail);
            if (window.chrome && window.chrome.webview) {
                window.chrome.webview.postMessage({
                    type: 'webui-close',
                    action: event.detail.action,
                    timestamp: event.detail.timestamp
                });
            }
        });
        
        // Send ready message
        setTimeout(() => {
            if (window.chrome && window.chrome.webview) {
                window.chrome.webview.postMessage({
                    type: 'ready',
                    message: 'WebUI Toolbar Ready'
                });
            }
        }, 500);
        
        // Log any errors
        window.onerror = function(msg, url, line, col, error) {
            console.error('JavaScript error:', msg, 'at', url, line, col, error);
            return false;
        };
    </script>
</body>
</html> 